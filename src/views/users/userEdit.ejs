<!DOCTYPE html>
<html lang="es">
<%- include('../partials/head.ejs') %>
<body>
    <%- include('../partials/header.ejs') %>
    <main>
        <h1><i class="fas fa-solid fa-paw"></i> Edición de usuario</h1>
        <!--<h2>Para tener una mejor experiencia y beneficios exclusivos para ti y para tu mascota.</h2>-->
        <div class="registro">
        <form class="formulario" id="registerForm" action="/users/edit/<%= user.id %>" method="POST" enctype="multipart/form-data">
            <label for="product-image" class="label-style">IMAGEN DE PERFIL</label>
           <div class="user-image"><img src="/img/users/<%= user.image %> "></div>
            <label for="role" class="label-style">NOMBRE</label>
            <input type="text" class="create-form-input dato <%= locals.errors && errors.firstName ? 'no-valid' : null %>" 
            name="firstName" id="firstName" placeholder="NOMBRE *" value="<%= user.firstName %>" require>
            <% if (locals.errors && errors.firstName) { %> 
                <div class="mensaje-error">
                    <%= errors.firstName.msg %>
                </div>
            <% } %>
            <label for="role" class="label-style">APELLIDO</label>
            <input type="text" class="create-form-input dato <%= locals.errors && errors.lastName ? 'no-valid' : null %>"
            name="lastName" id="lastName" placeholder="APELLIDO *" value="<%= user.lastName %>" require>
            <% if (locals.errors && errors.lastName) { %>
                <div class="mensaje-error">
                    <%= errors.lastName.msg %>
                </div>
            <% } %>
            <label for="role" class="label-style">CORREO ELECTRONICO</label>
            <input type="email" class="create-form-input dato <%= locals.errors && errors.email ? 'no-valid' : null %>"
            name="email" id="email" placeholder="CORREO ELECTRONICO *" value="<%= user.email %>" require>
            <% if (locals.errors && errors.email) { %>
                <div class="mensaje-error">
                    <%= errors.email.msg %>
                </div>
            <% } %>
            <label for="role" class="label-style">CONTRASEÑA</label>
            <input type="password" class="create-form-input dato <%= locals.errors && errors.password ? 'no-valid' : null %>" 
            name="password" id="password" placeholder="CONTRASEÑA *" value="<%= user.password %>" require>
            <% if (locals.errors && errors.password) { %>
                <div class="mensaje-error">
                    <%= errors.password.msg %>
                </div>
            <% } %>
            <label for="role" class="label-style">Rol de usuario</label>
            <select class="create-form-input" name="id_role" id="" required>
                <% role.forEach(role => { %>
                    <option value="<%= user.id %>" <% if (user.role.id == role.id) { %><%= 'selected' %><% }; %>><%= role.name %></option>
                    <% }); %> 
            </select>
          <!--   <label for="id_role" id="id_role" name="id_role" class="label-style">CATEGORIA</label>
            <div class="aceptar">
                <input type="radio" value="customer" class="checkbox">
                <label for="acepto">Customer *</label>
            </div>
            <div class="aceptar">
                <input type="radio" value="admin" class="checkbox">
                <label for="acepto">Admin *</label>
            </div>
            <% if (locals.errors && errors.categoria) { %>
                <div class="mensaje-error">
                    <%= errors.categoria.msg %>
                </div>
            <% } %>-->
	        <label for="user-image" class="label-style">IMAGEN DE PERFIL</label>
            <input name="avatar" type="file" class="create-form-input dato <%= locals.errors && errors.avatar ? 'no-valid' : null %>"
            id="product-image" value="<%= user.image %>">
            <% if (locals.errors && errors.avatar) { %>
                <div class="mensaje-error">
                    <%= errors.avatar.msg %>
                </div>
            <% } %>
        <div class="aceptar">
            <!--<input type="checkbox" value="acepto" name="acepto" id="acepto" class="checkbox" required>
            <label for="acepto">Acepto aviso de privacidad. Terminos y condiciones *</label>-->
        </div>
        <div class="submit">
            <button type="submit" class="enviar" id="button">Actualizar</button>
        </div>
        </form>
        </div>
    </main>
    <%- include('../partials/footer.ejs') %>
</body>
</html>